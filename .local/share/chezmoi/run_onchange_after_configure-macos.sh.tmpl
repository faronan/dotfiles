#!/bin/bash
{{ if eq .chezmoi.os "darwin" -}}
# Fishをデフォルトシェルに設定
FISH_PATH="/opt/homebrew/bin/fish"

if [ -x "$FISH_PATH" ]; then
    # /etc/shellsに追加されていなければ追加
    if ! grep -q "$FISH_PATH" /etc/shells; then
        echo "Adding Fish to /etc/shells..."
        echo "$FISH_PATH" | sudo tee -a /etc/shells
    fi

    # デフォルトシェルがFishでなければ変更
    if [ "$SHELL" != "$FISH_PATH" ]; then
        echo "Setting Fish as default shell..."
        chsh -s "$FISH_PATH"
    fi
fi

# mise初期設定
if command -v mise &> /dev/null; then
    echo "Installing mise tools..."
    mise install
fi
{{ end -}}
