#!/bin/bash
set -euo pipefail
{{ if eq .chezmoi.os "darwin" -}}

# Fisher (Fish plugin manager) をインストール
if command -v fish &> /dev/null; then
    echo "Installing Fisher plugin manager..."
    fish -c '
        if not functions -q fisher
            curl -sL https://raw.githubusercontent.com/jorgebucaran/fisher/main/functions/fisher.fish | source
            fisher install jorgebucaran/fisher
        end
    '

    # fish_plugins が存在する場合、プラグインをインストール
    FISH_PLUGINS="$HOME/.config/fish/fish_plugins"
    if [ -f "$FISH_PLUGINS" ]; then
        echo "Installing Fish plugins from fish_plugins..."
        fish -c 'fisher update'
    fi
fi

{{ end -}}
